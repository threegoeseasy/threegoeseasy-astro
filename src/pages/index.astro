---
import Layout from "../layouts/Layout.astro";
import { Image } from "@astrojs/image/components";

const src = ["https://aframe.io/releases/1.2.0/aframe.min.js"];
---

<Layout args={{ script: src }}>
  <main>
    <aside class="flex flex-col p-8">
      <div class="h-[30vh] lg:h-[25vh] xl:h-[20vh] overflow-hidden">
        <h1
          id="quote"
          class="text-3xl lg:text-4xl xl:text-5xl text-justify text-balance antialiased"
        >
        </h1>
      </div>
      <a
        class="min-w-[50%] mt-8 flex align-middle justify-center py-4 dark:opacity-40"
        id="mail"
        href="mailto:threegoeseasy@gmail.com"
      >
        <Image
          src="/dvd.png"
          height={328}
          alt="email"
          class="antialiased drop-shadow-xl"
          width={594}
        /></a
      >
    </aside>
  </main>

  <script>
    import { transitionTexts } from "../utils/styles";

    const quotes = [
      "Если совершенство - это бриллиант, то его грани - это технологии, пересечения которых порождают наконечники, вырезающие решения в нашем черном стекле.",
      "Wenn Exzellenz ein Diamant ist, dann sind seine Facetten Technologien, deren Überschneidungen Spitzen ergeben, die Lösungen in unser schwarzes Glas ritzen.",
      "If excellence is a diamond, its facets are technologies, whose intersections produce robust points, that carve solutions into our black glass.",
      "如果說卓越是一顆鑽石，那麼它的切面就是技術，這些技術的交叉點會產生強大的能量，在我們的黑色玻璃上雕刻出解決方案。",
      "Om excellens är en diamant, så är dess fasetter teknikerna, vars skärningspunkter ger robusta punkter, som ristar in lösningar i vårt svarta glas.",
      "إذا كان التميّز ألماسة، فإن جوانبه هي التقنيات، التي تُنتج تقاطعاتها نقاطًا قوية، تنحت الحلول في زجاجنا الأسود.\n",
      "Als uitmuntendheid een diamant is, zijn de facetten ervan de technieken, waarvan de snijpunten robuuste punten opleveren, die oplossingen snijden in ons zwarte glas.",
      "Se a excelência é um diamante, as suas facetas são as técnicas, cujas intersecções produzem pontos robustos, que esculpem soluções no nosso vidro negro.",
    ];

    const h1quote = document.getElementById("quote");
    const quoteAmount = quotes.length;
    let i = 0;

    // const mail = document.getElementById("mail");
    // const quoteHeight = h1quote.offsetHeight;
    // mail.style.height = quoteHeight;
    h1quote.innerText = quotes[0];

    function updateQuote() {
      const nextIndex = (i + 1) % quoteAmount; // Compute the next index
      transitionTexts(quotes[i], quotes[nextIndex], 27, (output) => {
        h1quote.innerText = output;
      });

      i = nextIndex; // Update `i` after transition
      console.log(i, quotes[i]);

      const randomInterval = Math.random() * 4000 + 7000;
      setTimeout(updateQuote, randomInterval);
    }

    updateQuote();
  </script>

  <style>
    main {
      margin: auto;
      padding: 1.5rem;
    }

    #mail {
      cursor: url(/mail.png), pointer;
    }

    a {
      transition: text-shadow 0.5s ease;
    }
    a:hover {
    }
  </style>
</Layout>